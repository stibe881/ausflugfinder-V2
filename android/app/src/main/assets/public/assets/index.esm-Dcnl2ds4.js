var ce=Object.getOwnPropertyNames,le=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty;function V(s,e){return function(r,n,i){return s(r,n,i)&&e(r,n,i)}}function I(s){return function(t,r,n){if(!t||!r||typeof t!="object"||typeof r!="object")return s(t,r,n);var i=n.cache,a=i.get(t),u=i.get(r);if(a&&u)return a===r&&u===t;i.set(t,r),i.set(r,t);var o=s(t,r,n);return i.delete(t),i.delete(r),o}}function fe(s){return s?.[Symbol.toStringTag]}function K(s){return ce(s).concat(le(s))}var pe=Object.hasOwn||(function(s,e){return he.call(s,e)});function T(s,e){return s===e||!s&&!e&&s!==s&&e!==e}var de="__v",me="__o",ge="_owner",W=Object.getOwnPropertyDescriptor,H=Object.keys;function Ee(s,e,t){var r=s.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(s[r],e[r],r,r,s,e,t))return!1;return!0}function ve(s,e){return T(s.getTime(),e.getTime())}function ye(s,e){return s.name===e.name&&s.message===e.message&&s.cause===e.cause&&s.stack===e.stack}function we(s,e){return s===e}function J(s,e,t){var r=s.size;if(r!==e.size)return!1;if(!r)return!0;for(var n=new Array(r),i=s.entries(),a,u,o=0;(a=i.next())&&!a.done;){for(var l=e.entries(),h=!1,c=0;(u=l.next())&&!u.done;){if(n[c]){c++;continue}var d=a.value,m=u.value;if(t.equals(d[0],m[0],o,c,s,e,t)&&t.equals(d[1],m[1],d[0],m[0],s,e,t)){h=n[c]=!0;break}c++}if(!h)return!1;o++}return!0}var Ae=T;function Me(s,e,t){var r=H(s),n=r.length;if(H(e).length!==n)return!1;for(;n-- >0;)if(!ie(s,e,t,r[n]))return!1;return!0}function P(s,e,t){var r=K(s),n=r.length;if(K(e).length!==n)return!1;for(var i,a,u;n-- >0;)if(i=r[n],!ie(s,e,t,i)||(a=W(s,i),u=W(e,i),(a||u)&&(!a||!u||a.configurable!==u.configurable||a.enumerable!==u.enumerable||a.writable!==u.writable)))return!1;return!0}function ke(s,e){return T(s.valueOf(),e.valueOf())}function _e(s,e){return s.source===e.source&&s.flags===e.flags}function Y(s,e,t){var r=s.size;if(r!==e.size)return!1;if(!r)return!0;for(var n=new Array(r),i=s.values(),a,u;(a=i.next())&&!a.done;){for(var o=e.values(),l=!1,h=0;(u=o.next())&&!u.done;){if(!n[h]&&t.equals(a.value,u.value,a.value,u.value,s,e,t)){l=n[h]=!0;break}h++}if(!l)return!1}return!0}function Oe(s,e){var t=s.length;if(e.length!==t)return!1;for(;t-- >0;)if(s[t]!==e[t])return!1;return!0}function qe(s,e){return s.hostname===e.hostname&&s.pathname===e.pathname&&s.protocol===e.protocol&&s.port===e.port&&s.hash===e.hash&&s.username===e.username&&s.password===e.password}function ie(s,e,t,r){return(r===ge||r===me||r===de)&&(s.$$typeof||e.$$typeof)?!0:pe(e,r)&&t.equals(s[r],e[r],r,r,s,e,t)}var Ce="[object Arguments]",xe="[object Boolean]",Te="[object Date]",Pe="[object Error]",Se="[object Map]",Le="[object Number]",je="[object Object]",Ie="[object RegExp]",Re="[object Set]",be="[object String]",Ne="[object URL]",Ue=Array.isArray,Q=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,X=Object.assign,Ze=Object.prototype.toString.call.bind(Object.prototype.toString);function Fe(s){var e=s.areArraysEqual,t=s.areDatesEqual,r=s.areErrorsEqual,n=s.areFunctionsEqual,i=s.areMapsEqual,a=s.areNumbersEqual,u=s.areObjectsEqual,o=s.arePrimitiveWrappersEqual,l=s.areRegExpsEqual,h=s.areSetsEqual,c=s.areTypedArraysEqual,d=s.areUrlsEqual,m=s.unknownTagComparators;return function(f,p,g){if(f===p)return!0;if(f==null||p==null)return!1;var v=typeof f;if(v!==typeof p)return!1;if(v!=="object")return v==="number"?a(f,p,g):v==="function"?n(f,p,g):!1;var y=f.constructor;if(y!==p.constructor)return!1;if(y===Object)return u(f,p,g);if(Ue(f))return e(f,p,g);if(Q!=null&&Q(f))return c(f,p,g);if(y===Date)return t(f,p,g);if(y===RegExp)return l(f,p,g);if(y===Map)return i(f,p,g);if(y===Set)return h(f,p,g);var w=Ze(f);if(w===Te)return t(f,p,g);if(w===Ie)return l(f,p,g);if(w===Se)return i(f,p,g);if(w===Re)return h(f,p,g);if(w===je)return typeof f.then!="function"&&typeof p.then!="function"&&u(f,p,g);if(w===Ne)return d(f,p,g);if(w===Pe)return r(f,p,g);if(w===Ce)return u(f,p,g);if(w===xe||w===Le||w===be)return o(f,p,g);if(m){var M=m[w];if(!M){var j=fe(f);j&&(M=m[j])}if(M)return M(f,p,g)}return!1}}function De(s){var e=s.circular,t=s.createCustomConfig,r=s.strict,n={areArraysEqual:r?P:Ee,areDatesEqual:ve,areErrorsEqual:ye,areFunctionsEqual:we,areMapsEqual:r?V(J,P):J,areNumbersEqual:Ae,areObjectsEqual:r?P:Me,arePrimitiveWrappersEqual:ke,areRegExpsEqual:_e,areSetsEqual:r?V(Y,P):Y,areTypedArraysEqual:r?P:Oe,areUrlsEqual:qe,unknownTagComparators:void 0};if(t&&(n=X({},n,t(n))),e){var i=I(n.areArraysEqual),a=I(n.areMapsEqual),u=I(n.areObjectsEqual),o=I(n.areSetsEqual);n=X({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:u,areSetsEqual:o})}return n}function Be(s){return function(e,t,r,n,i,a,u){return s(e,t,u)}}function Ge(s){var e=s.circular,t=s.comparator,r=s.createState,n=s.equals,i=s.strict;if(r)return function(o,l){var h=r(),c=h.cache,d=c===void 0?e?new WeakMap:void 0:c,m=h.meta;return t(o,l,{cache:d,equals:n,meta:m,strict:i})};if(e)return function(o,l){return t(o,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};var a={cache:void 0,equals:n,meta:void 0,strict:i};return function(o,l){return t(o,l,a)}}var ee=O();O({strict:!0});O({circular:!0});O({circular:!0,strict:!0});O({createInternalComparator:function(){return T}});O({strict:!0,createInternalComparator:function(){return T}});O({circular:!0,createInternalComparator:function(){return T}});O({circular:!0,createInternalComparator:function(){return T},strict:!0});function O(s){s===void 0&&(s={});var e=s.circular,t=e===void 0?!1:e,r=s.createInternalComparator,n=s.createState,i=s.strict,a=i===void 0?!1:i,u=De(s),o=Fe(u),l=r?r(o):Be(o);return Ge({circular:t,comparator:o,createState:n,equals:l,strict:a})}const te=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],N=1,S=8;class G{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(n!==N)throw new Error(`Got v${n} data when expected v${N}.`);const i=te[r&15];if(!i)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[u]=new Uint32Array(e,4,1);return new G(u,a,i,e)}constructor(e,t=64,r=Float64Array,n){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=te.indexOf(this.ArrayType),a=e*2*this.ArrayType.BYTES_PER_ELEMENT,u=e*this.IndexArrayType.BYTES_PER_ELEMENT,o=(8-u%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,S,e),this.coords=new this.ArrayType(this.data,S+u+o,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(S+a+u+o),this.ids=new this.IndexArrayType(this.data,S,e),this.coords=new this.ArrayType(this.data,S+u+o,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(N<<4)+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return F(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:u}=this,o=[0,i.length-1,0],l=[];for(;o.length;){const h=o.pop()||0,c=o.pop()||0,d=o.pop()||0;if(c-d<=u){for(let p=d;p<=c;p++){const g=a[2*p],v=a[2*p+1];g>=e&&g<=r&&v>=t&&v<=n&&l.push(i[p])}continue}const m=d+c>>1,E=a[2*m],f=a[2*m+1];E>=e&&E<=r&&f>=t&&f<=n&&l.push(i[m]),(h===0?e<=E:t<=f)&&(o.push(d),o.push(m-1),o.push(1-h)),(h===0?r>=E:n>=f)&&(o.push(m+1),o.push(c),o.push(1-h))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:i,nodeSize:a}=this,u=[0,n.length-1,0],o=[],l=r*r;for(;u.length;){const h=u.pop()||0,c=u.pop()||0,d=u.pop()||0;if(c-d<=a){for(let p=d;p<=c;p++)re(i[2*p],i[2*p+1],e,t)<=l&&o.push(n[p]);continue}const m=d+c>>1,E=i[2*m],f=i[2*m+1];re(E,f,e,t)<=l&&o.push(n[m]),(h===0?e-r<=E:t-r<=f)&&(u.push(d),u.push(m-1),u.push(1-h)),(h===0?e+r>=E:t+r>=f)&&(u.push(m+1),u.push(c),u.push(1-h))}return o}}function F(s,e,t,r,n,i){if(n-r<=t)return;const a=r+n>>1;oe(s,e,a,r,n,i),F(s,e,t,r,a-1,1-i),F(s,e,t,a+1,n,1-i)}function oe(s,e,t,r,n,i){for(;n>r;){if(n-r>600){const l=n-r+1,h=t-r+1,c=Math.log(l),d=.5*Math.exp(2*c/3),m=.5*Math.sqrt(c*d*(l-d)/l)*(h-l/2<0?-1:1),E=Math.max(r,Math.floor(t-h*d/l+m)),f=Math.min(n,Math.floor(t+(l-h)*d/l+m));oe(s,e,t,E,f,i)}const a=e[2*t+i];let u=r,o=n;for(L(s,e,r,t),e[2*n+i]>a&&L(s,e,r,n);u<o;){for(L(s,e,u,o),u++,o--;e[2*u+i]<a;)u++;for(;e[2*o+i]>a;)o--}e[2*r+i]===a?L(s,e,r,o):(o++,L(s,e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}}function L(s,e,t,r){U(s,t,r),U(e,2*t,2*r),U(e,2*t+1,2*r+1)}function U(s,e,t){const r=s[e];s[e]=s[t],s[t]=r}function re(s,e,t,r){const n=s-t,i=e-r;return n*n+i*i}const $e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:s=>s},se=Math.fround||(s=>(e=>(s[0]=+e,s[0])))(new Float32Array(1)),C=2,_=3,Z=4,k=5,ae=6;class ze{constructor(e){this.options=Object.assign(Object.create($e),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:n}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const a=[];for(let o=0;o<e.length;o++){const l=e[o];if(!l.geometry)continue;const[h,c]=l.geometry.coordinates,d=se(R(h)),m=se(b(c));a.push(d,m,1/0,o,-1,1),this.options.reduce&&a.push(0)}let u=this.trees[n+1]=this._createTree(a);t&&console.timeEnd(i);for(let o=n;o>=r;o--){const l=+Date.now();u=this.trees[o]=this._createTree(this._cluster(u,o)),t&&console.log("z%d: %d clusters in %dms",o,u.numItems,+Date.now()-l)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let i=e[2]===180?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const c=this.getClusters([r,n,180,a],t),d=this.getClusters([-180,n,i,a],t);return c.concat(d)}const u=this.trees[this._limitZoom(t)],o=u.range(R(r),b(a),R(i),b(n)),l=u.data,h=[];for(const c of o){const d=this.stride*c;h.push(l[d+k]>1?ne(l,d,this.clusterProps):this.points[l[d+_]])}return h}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const a=i.data;if(t*this.stride>=a.length)throw new Error(n);const u=this.options.radius/(this.options.extent*Math.pow(2,r-1)),o=a[t*this.stride],l=a[t*this.stride+1],h=i.within(o,l,u),c=[];for(const d of h){const m=d*this.stride;a[m+Z]===e&&c.push(a[m+k]>1?ne(a,m,this.clusterProps):this.points[a[m+_]])}if(c.length===0)throw new Error(n);return c}getLeaves(e,t,r){t=t||10,r=r||0;const n=[];return this._appendLeaves(n,e,t,r,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:u}=this.options,o=u/a,l=(r-o)/i,h=(r+1+o)/i,c={features:[]};return this._addTileFeatures(n.range((t-o)/i,l,(t+1+o)/i,h),n.data,t,r,i,c),t===0&&this._addTileFeatures(n.range(1-o/i,l,1,h),n.data,i,r,i,c),t===i-1&&this._addTileFeatures(n.range(0,l,o/i,h),n.data,-1,r,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,r.length!==1)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){const a=this.getChildren(t);for(const u of a){const o=u.properties;if(o&&o.cluster?i+o.point_count<=n?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,r,n,i):i<n?i++:e.push(u),e.length===r)break}return i}_createTree(e){const t=new G(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let r=0;r<e.length;r+=this.stride)t.add(e[r],e[r+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,r,n,i,a){for(const u of e){const o=u*this.stride,l=t[o+k]>1;let h,c,d;if(l)h=ue(t,o,this.clusterProps),c=t[o],d=t[o+1];else{const f=this.points[t[o+_]];h=f.properties;const[p,g]=f.geometry.coordinates;c=R(p),d=b(g)}const m={type:1,geometry:[[Math.round(this.options.extent*(c*i-r)),Math.round(this.options.extent*(d*i-n))]],tags:h};let E;l||this.options.generateId?E=t[o+_]:E=this.points[t[o+_]].id,E!==void 0&&(m.id=E),a.features.push(m)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:n,reduce:i,minPoints:a}=this.options,u=r/(n*Math.pow(2,t)),o=e.data,l=[],h=this.stride;for(let c=0;c<o.length;c+=h){if(o[c+C]<=t)continue;o[c+C]=t;const d=o[c],m=o[c+1],E=e.within(o[c],o[c+1],u),f=o[c+k];let p=f;for(const g of E){const v=g*h;o[v+C]>t&&(p+=o[v+k])}if(p>f&&p>=a){let g=d*f,v=m*f,y,w=-1;const M=((c/h|0)<<5)+(t+1)+this.points.length;for(const j of E){const q=j*h;if(o[q+C]<=t)continue;o[q+C]=t;const z=o[q+k];g+=o[q]*z,v+=o[q+1]*z,o[q+Z]=M,i&&(y||(y=this._map(o,c,!0),w=this.clusterProps.length,this.clusterProps.push(y)),i(y,this._map(o,q)))}o[c+Z]=M,l.push(g/p,v/p,1/0,M,-1,p),i&&l.push(w)}else{for(let g=0;g<h;g++)l.push(o[c+g]);if(p>1)for(const g of E){const v=g*h;if(!(o[v+C]<=t)){o[v+C]=t;for(let y=0;y<h;y++)l.push(o[v+y])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+k]>1){const a=this.clusterProps[e[t+ae]];return r?Object.assign({},a):a}const n=this.points[e[t+_]].properties,i=this.options.map(n);return r&&i===n?Object.assign({},i):i}}function ne(s,e,t){return{type:"Feature",id:s[e+_],properties:ue(s,e,t),geometry:{type:"Point",coordinates:[Ve(s[e]),Ke(s[e+1])]}}}function ue(s,e,t){const r=s[e+k],n=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?`${Math.round(r/100)/10}k`:r,i=s[e+ae],a=i===-1?{}:Object.assign({},t[i]);return Object.assign(a,{cluster:!0,cluster_id:s[e+_],point_count:r,point_count_abbreviated:n})}function R(s){return s/360+.5}function b(s){const e=Math.sin(s*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function Ve(s){return(s-.5)*360}function Ke(s){const e=(180-s*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function We(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t}class A{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(Number.isFinite(e.position.lat)&&Number.isFinite(e.position.lng))return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class D{constructor({markers:e,position:t}){this.markers=[],e&&(this.markers=e),t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(A.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>A.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(A.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}function B(s,e="assertion failed"){if(s==null)throw Error(e)}class He{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return Je(e)}}const Je=s=>s.map(t=>new D({position:A.getPosition(t),markers:[t]}));class Ye extends He{constructor(e){var{maxZoom:t,radius:r=60}=e,n=We(e,["maxZoom","radius"]);super({maxZoom:t}),this.markers=[],this.clusters=[],this.state={zoom:-1},this.superCluster=new ze(Object.assign({maxZoom:this.maxZoom,radius:r},n))}calculate(e){let t=!1,r=e.map.getZoom();B(r),r=Math.round(r);const n={zoom:r};if(!ee(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const i=this.markers.map(a=>{const u=A.getPosition(a);return{type:"Feature",geometry:{type:"Point",coordinates:[u.lng(),u.lat()]},properties:{marker:a}}});this.superCluster.load(i)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!ee(this.state,n)),this.state=n,e.markers.length===0?(this.clusters=[],{clusters:this.clusters,changed:t}):(t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t})}cluster({map:e}){const t=e.getZoom();return B(t),this.superCluster.getClusters([-180,-90,180,90],Math.round(t)).map(r=>this.transformCluster(r))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){if(r.cluster)return new D({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:t,lng:e}});const n=r.marker;return new D({markers:[n],position:A.getPosition(n)})}}class Qe{constructor(e,t){this.markers={sum:e.length};const r=t.map(i=>i.count),n=r.reduce((i,a)=>i+a,0);this.clusters={count:t.length,markers:{mean:n/t.length,sum:n,min:Math.min(...r),max:Math.max(...r)}}}}class Xe{render({count:e,position:t},r,n){const a=`<svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,u=`Cluster of ${e} markers`,o=Number(google.maps.Marker.MAX_ZINDEX)+e;if(A.isAdvancedMarkerAvailable(n)){const c=new DOMParser().parseFromString(a,"image/svg+xml").documentElement;c.setAttribute("transform","translate(0 25)");const d={map:n,position:t,zIndex:o,title:u,content:c};return new google.maps.marker.AdvancedMarkerElement(d)}const l={position:t,zIndex:o,title:u,icon:{url:`data:image/svg+xml;base64,${btoa(a)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(l)}}function et(s,e){for(let t in e.prototype)s.prototype[t]=e.prototype[t]}class ${constructor(){et($,google.maps.OverlayView)}}var x;(function(s){s.CLUSTERING_BEGIN="clusteringbegin",s.CLUSTERING_END="clusteringend",s.CLUSTER_CLICK="click",s.GMP_CLICK="gmp-click"})(x||(x={}));const tt=(s,e,t)=>{e.bounds&&t.fitBounds(e.bounds)};class rt extends ${constructor({map:e,markers:t=[],algorithmOptions:r={},algorithm:n=new Ye(r),renderer:i=new Xe,onClusterClick:a=tt}){super(),this.map=null,this.idleListener=null,this.markers=[...t],this.clusters=[],this.algorithm=n,this.renderer=i,this.onClusterClick=a,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(r=>{this.addMarker(r,!0)}),t||this.render()}removeMarker(e,t){const r=this.markers.indexOf(e);return r===-1?!1:(A.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){let r=!1;return e.forEach(n=>{r=this.removeMarker(n,!0)||r}),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,x.CLUSTERING_BEGIN,this);const{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){const n=new Set;for(const a of t)a.markers.length==1&&n.add(a.markers[0]);const i=[];for(const a of this.clusters)a.marker!=null&&(a.markers.length==1?n.has(a.marker)||A.setMap(a.marker,null):i.push(a.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>i.forEach(a=>A.setMap(a,null)))}google.maps.event.trigger(this,x.CLUSTERING_END,this)}}onAdd(){const e=this.getMap();B(e),this.idleListener=e.addListener("idle",this.render.bind(this)),this.render()}onRemove(){this.idleListener&&google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>A.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new Qe(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(r=>{if(r.markers.length===1)r.marker=r.markers[0];else if(r.marker=this.renderer.render(r,e,t),r.markers.forEach(n=>A.setMap(n,null)),this.onClusterClick){const n=A.isAdvancedMarker(r.marker)?x.GMP_CLICK:x.CLUSTER_CLICK;r.marker.addListener(n,i=>{google.maps.event.trigger(this,x.CLUSTER_CLICK,r),this.onClusterClick(i,r,t)})}A.setMap(r.marker,t)})}}export{He as AbstractAlgorithm,D as Cluster,Qe as ClusterStats,Xe as DefaultRenderer,rt as MarkerClusterer,x as MarkerClustererEvents,A as MarkerUtils,Ye as SuperClusterAlgorithm,tt as defaultOnClusterClickHandler,Je as noop};
