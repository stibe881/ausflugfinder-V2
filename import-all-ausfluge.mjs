import mysql from "mysql2/promise";

const pool = mysql.createPool({
  host: "185.178.193.60",
  user: "ausflugfinder",
  password: "!LeliBist.1561!",
  database: "ausflugfinder_v2",
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0,
});

// Cost mapping from kosten_stufe to cost enum
const costMap = {
  0: "free",
  1: "low",
  2: "medium",
  3: "high",
  4: "very_high",
};

// All 45 ausflüge data from SQL
const ausfluge = [
  {
    id: 1,
    title: "Rulantica",
    description: "Rulantica verspricht das ganze Jahr über Wasservergnügen für die ganze Familie: Ob Adrenalin-Junkies, Kleinkinder oder Entspannungssuchende – in der Wasserwelt ist für jeden etwas dabei.",
    destination: "Rust",
    region: "Deutschland",
    category: null,
    cost: costMap[4],
    latitude: "48.2612350",
    longitude: "7.7398690",
    isPublic: 1,
  },
  {
    id: 4,
    title: "Bellis Mini-Freizeitpark",
    description: "Geniessen Sie unbeschwerte Momente in unserem Mini-Freizeitpark inmitten der Natur. Hier können sich Ihre Kinder austoben und Sie sich in aller Ruhe bei einem Cafe oder Gläschen Wein und leckerem Essen ausruhen.",
    destination: "Roggwil",
    region: "Bern",
    category: null,
    cost: costMap[2],
    latitude: "47.2493313",
    longitude: "7.8219601",
    isPublic: 1,
  },
  {
    id: 5,
    title: "Kiddy Dome",
    description: "Auf mehr als 6.000 m2 Fläche und insgesamt fünf Ebenen findest du alles, was du für einen unvergesslichen Familienausflug brauchst. Egal, ob du mit deinem Baby, Kleinkind oder älteren Kindern kommst, wir haben für alle Altersgruppen die passenden Aktivitäten und Einrichtungen.",
    destination: "Rohrbach",
    region: "Bern",
    category: null,
    cost: costMap[3],
    latitude: "47.1315220",
    longitude: "7.8186197",
    isPublic: 1,
  },
  {
    id: 6,
    title: "Pumptrack",
    description: "Pumptrack Zell by Flying Metal",
    destination: "Zell",
    region: "Luzern",
    category: null,
    cost: costMap[0],
    latitude: "47.1379621",
    longitude: "7.9257474",
    isPublic: 1,
  },
  {
    id: 8,
    title: "Chugelibahn Seebodenalp",
    description: "Auf der Seebodenalp gibt es neu einen Chugelbahnen-Weg, welcher Jung und Alt begeistert. Man macht sich mit einer grossen Holzkugel auf den Weg und kann an 11 verschiedenen Standorten spielen.",
    destination: "Seebodenalp",
    region: "Nidwalden",
    category: null,
    cost: costMap[3],
    latitude: "47.0689285",
    longitude: "8.4667938",
    isPublic: 1,
  },
  {
    id: 10,
    title: "Abenteuerpfad Marbach",
    description: "Erleben Sie auf dem zweistündigen Abenteuerpfad durch die Natur die Geschichte der drei Vögel Mar, Sol und Lou. Die Rauschschwalbe, die Bachstelze und der Spatz erzählen Ihnen viel Wissenswertes über ihre Vogelwelt.",
    destination: "Marbach",
    region: "Luzern",
    category: null,
    cost: costMap[2],
    latitude: "47.5707086",
    longitude: "16.0589364",
    isPublic: 1,
  },
  {
    id: 11,
    title: "Seeteufel",
    description: "Umgeben von einer faszinierenden & naturbelassenden Pflanzenwelt beherbergt das beliebte Seeländer Ausflugsziel auf über 7 Hektaren mehr als 40 Tierarten aus allen 5 Erdteilen sowie zahlreiche Spiel- & Vergnügungsmöglichkeiten für Kinder zwischen 2 & 12 Jahren.",
    destination: "Studen",
    region: "Bern",
    category: null,
    cost: costMap[3],
    latitude: "47.1115530",
    longitude: "7.3185740",
    isPublic: 1,
  },
  {
    id: 12,
    title: "Chärnsmatt",
    description: "Die CHÄRNSMATT ist ein beliebtes Ausflugsziel und befindet sich in Rothenburg, gerade mal 10 Minuten von Luzern entfernt. Der Gasthof ist mit seinen schmucken Zimmern, das Restaurant mit den hausgemachten Pouletchnusperli und vor allem der riesengrosse Spielplatz mit eigener Liliputbahn machen die CHÄRNSMATT über die Kantonsgrenze hinaus bekannt und beliebt.",
    destination: "Rothenburg",
    region: "Luzern",
    category: null,
    cost: costMap[4],
    latitude: "47.0997871",
    longitude: "8.2707408",
    isPublic: 1,
  },
  {
    id: 13,
    title: "Freilichtmuseum Ballenberg",
    description: "Tradition, die lebt. Unsere Wohnhäuser, Ställe und Scheunen sind täglich für Sie geöffnet.",
    destination: "Ballenberg",
    region: "Bern",
    category: null,
    cost: costMap[4],
    latitude: "46.7509031",
    longitude: "8.0777960",
    isPublic: 1,
  },
  {
    id: 14,
    title: "Europa Park",
    description: "Im Herzen Europas, zwischen Schwarzwald und Vogesen, liegt einer der schönsten Freizeitparks der Welt. Seit 1975 begeistert der Europa-Park kleine und große Gäste mit seinem ganz besonderen Charme.",
    destination: "Rust",
    region: "Deutschland",
    category: null,
    cost: costMap[4],
    latitude: "48.2660194",
    longitude: "7.7220076",
    isPublic: 1,
  },
  {
    id: 15,
    title: "Restaurant Pizzeria Landhaus",
    description: "Es ist unser persönliches Anliegen, Ihren Aufenthalt im Landhaus zu einem Geschmackserlebnis zu gestalten. Küchenbrigade und Bedienung legen grossen Wert auf frische regionale Produkte, welche wir mit Sorgfalt verarbeiten.",
    destination: "Unterseen",
    region: "Bern",
    category: null,
    cost: costMap[3],
    latitude: "46.6820670",
    longitude: "7.8132300",
    isPublic: 1,
  },
  {
    id: 16,
    title: "Glögglifroschweg",
    description: "Der Glögglifroschweg Eich ist ein kleiner Erlebnisweg, welcher in Zusammenhang mit einem Artenförderungsprojekt für die gefährdete Geburtshelferkröte (Glögglifrosch) errichtet wurde.",
    destination: "Eich",
    region: "Luzern",
    category: null,
    cost: costMap[0],
    latitude: "47.1521568",
    longitude: "8.1694166",
    isPublic: 1,
  },
  {
    id: 17,
    title: "Walderlebnispfad",
    description: "Die kurze Rundwanderung startet beim Infopavillon auf dem Jungfernplatz und führt dich über den «Aufrechten Bären» bis zum höchsten Punkt im Roggwiler Wald.",
    destination: "Roggwil",
    region: "Luzern",
    category: null,
    cost: costMap[0],
    latitude: "47.2405859",
    longitude: "7.8235104",
    isPublic: 1,
  },
  {
    id: 18,
    title: "Kugelbahn-Rundweg, Oberiberg",
    description: "Die Kugelbahn aus Lärchenholz, die in mehrere Teilstrecken aufgeteilt ist, sorgt für Spiel und Spass auf dieser idyllischen Wanderung durch das Feriendorf Oberiberg.",
    destination: "Oberiberg",
    region: "Schwyz",
    category: null,
    cost: costMap[0],
    latitude: "47.0391614",
    longitude: "8.7817859",
    isPublic: 1,
  },
  {
    id: 19,
    title: "Grotte und Dino Park",
    description: "Grotte und Dino Park",
    destination: "Réclère",
    region: "Jura",
    category: null,
    cost: costMap[2],
    latitude: "47.3589213",
    longitude: "6.9142950",
    isPublic: 1,
  },
  {
    id: 20,
    title: "Sauriermuseum Aathal",
    description: "Entdecken Sie bei uns echte Dinosaurierskelette aus eigener Grabung, diverse Spezialausstellungen zu Themen wie Bernstein, fossilen Pflanzen usw.",
    destination: "Aathal",
    region: "Zürich",
    category: null,
    cost: costMap[4],
    latitude: "47.3388227",
    longitude: "8.7619400",
    isPublic: 1,
  },
  {
    id: 36,
    title: "Abenteuerweg - Ahoi Piraten!",
    description: "Im Hörspiel treffen die Geschwister Winnie & Tack auf Helgi, der fürs Leben gerne Pirat werden möchte.",
    destination: "Fehraltorf",
    region: "Zürich",
    category: null,
    cost: costMap[0],
    latitude: "47.3853129",
    longitude: "8.7499615",
    isPublic: 1,
  },
  {
    id: 37,
    title: "Abenteuerweg - Der Diamantring",
    description: "In Egg hören Winnie & Tack von einer Einbruchserie. Sie verfolgen die Spuren und versuchen die Täter zu entlarven.",
    destination: "Hinteregg",
    region: "Zürich",
    category: null,
    cost: costMap[0],
    latitude: "47.3060295",
    longitude: "8.6840753",
    isPublic: 1,
  },
  {
    id: 38,
    title: "Abenteuerweg - Die Suche nach Silber",
    description: "In Mönchaltorf suchen Winnie & Tack nach alten Silbermünzen. Dabei werden sie Zeugen eines Überfalls und verfolgen den Dieb.",
    destination: "Mönchaltorf",
    region: "Zürich",
    category: null,
    cost: costMap[0],
    latitude: "47.3077428",
    longitude: "8.7230938",
    isPublic: 1,
  },
  {
    id: 39,
    title: "Abenteuerweg - Winnie & Tack helfen der Magierin",
    description: "Auf der Suche nach den Symbolen auf der Karte treffen Winnie & Tack auf eine verzauberte Magierin.",
    destination: "Meilen",
    region: "Zürich",
    category: null,
    cost: costMap[0],
    latitude: "47.1807609",
    longitude: "8.4593324",
    isPublic: 1,
  },
  {
    id: 40,
    title: "Smartphone Schnitzeljagd - Hexenkraft",
    description: "Die Hexe Mary ist verzweifelt. Die Oberhexe hat ihr alle Hexenkräfte weggenommen.",
    destination: "Sursee",
    region: "Luzern",
    category: null,
    cost: costMap[2],
    latitude: "47.1724320",
    longitude: "8.1109560",
    isPublic: 1,
  },
  {
    id: 41,
    title: "Smartphone Schnitzeljagd - Schatzsuche",
    description: "Gemeinsam mit dem Piraten Jack macht ihr Euch auf den abenteuerlichen Weg und sucht den verlorenen Schatz am Lungernsee.",
    destination: "Lungern",
    region: "Obwalden",
    category: null,
    cost: costMap[2],
    latitude: "46.7858188",
    longitude: "8.1597040",
    isPublic: 1,
  },
  {
    id: 42,
    title: "Smartphone Schnitzeljagd - Nachtgespenst",
    description: "Das Gespenst Lumi ist traurig, denn die anderen Gespenster haben es in ein Taggespenst verwandelt.",
    destination: "Aarau",
    region: "Aargau",
    category: null,
    cost: costMap[2],
    latitude: "47.3913454",
    longitude: "8.0454691",
    isPublic: 1,
  },
  {
    id: 43,
    title: "Smartphone Schnitzeljagd - Drachenfreund",
    description: "Zusammen mit Cleo macht Ihr euch auf den abenteuerlichen Märchenweg durch den Wald von Heiligkreuz.",
    destination: "Hasle",
    region: "Luzern",
    category: null,
    cost: costMap[2],
    latitude: "46.9461955",
    longitude: "8.0558211",
    isPublic: 1,
  },
  {
    id: 44,
    title: "Schmugglis Schatzsuche",
    description: "Vor vielen Jahren legte der Schmuggler Engelbert gemeinsam mit seinem Maultier Schmuggli regelmässig den mühsamen Weg von Engelberg über den Jochpass bis zur Engstlenalp zurück.",
    destination: "Titlis Talstation",
    region: "Obwalden",
    category: null,
    cost: costMap[0],
    latitude: "46.8161706",
    longitude: "8.3957541",
    isPublic: 1,
  },
  {
    id: 45,
    title: "Schmugglis Sbrinz Weg das Rätsel",
    description: "Die historische Sbrinz Route führt von Luzern über Engelberg bis nach Domodossola.",
    destination: "Engelberg",
    region: "Obwalden",
    category: null,
    cost: costMap[1],
    latitude: "46.8206098",
    longitude: "8.4023803",
    isPublic: 1,
  },
  {
    id: 46,
    title: "Schmugglis Spielplatz",
    description: "Hier entdeckst du die versteckten Schätze von Engelbert und seinem Maultier Schmuggli.",
    destination: "Trübsee",
    region: "Obwalden",
    category: null,
    cost: costMap[1],
    latitude: "46.7944762",
    longitude: "8.3899300",
    isPublic: 1,
  },
  {
    id: 47,
    title: "Sikypark - Schweizer Tierrettungspark",
    description: "Der Sikypark sorgt dafür, dass einheimische und exotische Wildtiere in Not ein gutes Zuhause erhalten.",
    destination: "Crémines",
    region: "Bern",
    category: null,
    cost: costMap[2],
    latitude: "47.2736250",
    longitude: "7.4555123",
    isPublic: 1,
  },
  {
    id: 48,
    title: "Spielhaus Stalla Libra",
    description: "Das Spielhaus Stalla Libra im Herzen von Sedrun wurde mit jungen Gestaltern des Royal College of Art in London entwickelt.",
    destination: "Sedrun",
    region: "Graubünden",
    category: null,
    cost: costMap[0],
    latitude: "46.6811028",
    longitude: "8.7761915",
    isPublic: 1,
  },
  {
    id: 49,
    title: "Wasserwald & Vogeldörfli",
    description: "Der Wasserwald auf Furt, eine einzigartige Wasserspielanlage, steht ganz im Zeichen von Spiel und Action rund um das Thema Wasser.",
    destination: "Bad Ragaz",
    region: "St. Gallen",
    category: null,
    cost: costMap[0],
    latitude: "47.0010950",
    longitude: "9.4162540",
    isPublic: 1,
  },
  {
    id: 50,
    title: "MounTeens Detektiv-Weg",
    description: "Erlebe mit den MounTeens ein spannendes Abenteuer auf dem MounTeens Detektiv-Weg am Pizol.",
    destination: "Wangs",
    region: "St. Gallen",
    category: null,
    cost: costMap[0],
    latitude: "47.0280926",
    longitude: "9.4332824",
    isPublic: 1,
  },
  {
    id: 51,
    title: "Kugelweg Hasliberg",
    description: "Entlang des Wanderweges von der Mittelstation Bidmi zur Talstation Reuti erwarten Sie 13 spannende und abwechslungsreiche Kugelbahnen.",
    destination: "Hasliberg",
    region: "Bern",
    category: null,
    cost: costMap[2],
    latitude: "46.7440448",
    longitude: "8.2187993",
    isPublic: 1,
  },
  {
    id: 52,
    title: "Zwergenspielplatz Bidmi",
    description: "Bei unserem Zwergenspielplatz in der Bidmi ist immer etwas los. Der neu erbaute Spielplatz ganz im Motto der Haslizwerge bietet eine abwechslungsreiche Austobmöglichkeit für Kinder.",
    destination: "Bidmi",
    region: "Bern",
    category: null,
    cost: costMap[2],
    latitude: "46.7441962",
    longitude: "8.2181007",
    isPublic: 1,
  },
  {
    id: 53,
    title: "Zwergenweg Mägisalp-Bidmi",
    description: "Abenteuer auf dem Zwergenweg. Die Haslizwerge haben in unserem Tal eine lange Tradition und Muggestutz ist der älteste Haslizwerg.",
    destination: "Mägisalp",
    region: "Bern",
    category: null,
    cost: costMap[2],
    latitude: "46.7447276",
    longitude: "8.2369945",
    isPublic: 1,
  },
  {
    id: 54,
    title: "Rufalipark",
    description: "Das Rufalipark Kinderspielparadies mit rund 300m² lässt für Kinder zwischen 1 und 10 Jahren keine Wünsche offen.",
    destination: "Obersaxen",
    region: "Graubünden",
    category: null,
    cost: costMap[0],
    latitude: "46.7510929",
    longitude: "9.1205880",
    isPublic: 1,
  },
  {
    id: 55,
    title: "Energiespielplatz Entlebuch",
    description: "Mit Spiel und Spass nachhaltige Energien entdecken. Je mehr Kinder hier sind, desto spannender wird es auf dem Energiespielplatz Entlebuch.",
    destination: "Entlebuch",
    region: "Luzern",
    category: null,
    cost: costMap[0],
    latitude: "46.9878541",
    longitude: "8.0592686",
    isPublic: 1,
  },
  {
    id: 56,
    title: "Abenteuerspielplatz Fröschenmatt",
    description: "Holz schleppen, sägen, hämmern, bauen, malen, basteln und vieles mehr. Hier darfst du eigene Hütten bauen.",
    destination: "Zug",
    region: "Zug",
    category: null,
    cost: costMap[0],
    latitude: "47.1813381",
    longitude: "8.4951151",
    isPublic: 1,
  },
  {
    id: 57,
    title: "Augusta Raurica",
    description: "Augusta Raurica birgt eine Vielzahl historischer Schätze, darunter ein mysteriöser Brunnen, der als der größte Silberschatz aus der Spätantike gilt.",
    destination: "Augst",
    region: "Basel-Landschaft",
    category: null,
    cost: costMap[1],
    latitude: "47.5340444",
    longitude: "7.7215489",
    isPublic: 1,
  },
  {
    id: 58,
    title: "Tierpark Goldau",
    description: "Der Natur- und Tierpark Goldau liegt eingebettet in einer einzigartigen Landschaft, geprägt von imposanten Felsbrocken und idyllischen Wäldern.",
    destination: "Goldau",
    region: "Schwyz",
    category: null,
    cost: costMap[3],
    latitude: "47.0514811",
    longitude: "8.5539168",
    isPublic: 1,
  },
  {
    id: 59,
    title: "Connyland",
    description: "CONNY-LAND, da wirst du was erleben! Baden mit Seelöwen, kreischen auf der Cobra und auf Entdeckungstour im Jungle.",
    destination: "Wäldi",
    region: "Thurgau",
    category: null,
    cost: costMap[3],
    latitude: "47.6143550",
    longitude: "9.0574462",
    isPublic: 1,
  },
  {
    id: 60,
    title: "Erlebnisweg Teufenthal",
    description: "Die Sage vom Schloss Liebegg und der Trostburg ist unterwegs in 7 Teilen zu lesen.",
    destination: "Teufenthal",
    region: "Aargau",
    category: null,
    cost: costMap[1],
    latitude: "47.3276148",
    longitude: "8.1186489",
    isPublic: 1,
  },
  {
    id: 62,
    title: "Laguna Badeland",
    description: "Den größten Genuss erlebt der Schwimmer, wenn er in der wohltemperierten Brandung des über 40 m langen Wellenbecken schwimmt.",
    destination: "Weil am Rhein",
    region: "Deutschland",
    category: null,
    cost: costMap[2],
    latitude: "47.5862114",
    longitude: "7.6157682",
    isPublic: 1,
  },
  {
    id: 66,
    title: "Kambly Erlebniswelt",
    description: "Entdecken Sie in der Erlebniswelt von Kambly den Ursprung der Traditionsmarke und begeben Sie sich mit Kambly auf Entdeckungstour durch das Emmental.",
    destination: "Trubschachen",
    region: "Bern",
    category: null,
    cost: costMap[0],
    latitude: "46.9203513",
    longitude: "7.8496591",
    isPublic: 1,
  },
  {
    id: 69,
    title: "KidsVille",
    description: "Der Kletterdschungel bietet den Kindern unzählige Wege, Tunnel und Klettermöglichkeiten.",
    destination: "Aarau",
    region: "Aargau",
    category: null,
    cost: costMap[1],
    latitude: "47.3949818",
    longitude: "8.0644745",
    isPublic: 1,
  },
  {
    id: 78,
    title: "Lasertag",
    description: "Lasertag ist ein Actionspiel, das Teamfähigkeit und Geschick gegen die Gegner erfordert.",
    destination: "Obfelden",
    region: "Aargau",
    category: null,
    cost: costMap[4],
    latitude: "47.2663571",
    longitude: "8.4228132",
    isPublic: 1,
  },
];

async function importAusfluge() {
  const connection = await pool.getConnection();

  try {
    // First, delete existing imported trips (keep user's personal trips)
    console.log("Deleting previous ausfluge imports...");
    await connection.query(
      "DELETE FROM trips WHERE title IN (SELECT DISTINCT title FROM trips WHERE id >= 11)"
    );

    console.log(`Importing ${ausfluge.length} ausflüge...`);

    let successful = 0;
    let failed = 0;

    for (const trip of ausfluge) {
      try {
        const sql = `
          INSERT INTO trips (
            title,
            description,
            destination,
            region,
            category,
            cost,
            latitude,
            longitude,
            isPublic,
            userId,
            startDate,
            endDate,
            status
          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), DATE_ADD(NOW(), INTERVAL 1 DAY), 'planned')
        `;

        await connection.query(sql, [
          trip.title,
          trip.description,
          trip.destination,
          trip.region,
          trip.category,
          trip.cost,
          trip.latitude,
          trip.longitude,
          trip.isPublic,
          1, // userId = 1 (Stefan)
        ]);

        successful++;
        console.log(`✓ Imported: ${trip.title}`);
      } catch (error) {
        failed++;
        console.error(`✗ Failed to import ${trip.title}:`, error.message);
      }
    }

    console.log(`\n✅ Import complete! Successfully imported ${successful} ausflüge. Failed: ${failed}`);
  } catch (error) {
    console.error("Import failed:", error);
  } finally {
    await connection.release();
    await pool.end();
  }
}

importAusfluge();
