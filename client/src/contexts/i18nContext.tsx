import React, { createContext, useContext, useEffect, useState, useCallback, useMemo } from "react";

export type Language = "de" | "fr" | "it" | "en";

// Translation strings
const translations: Record<Language, Record<string, string>> = {
  de: {
    "app.title": "AusflugFinder",
    "app.tagline": "Entdecke, plane und verwalte unvergessliche Familienausflüge und Abenteuer",
    "nav.myTrips": "Meine Ausflüge",
    "nav.profile": "Mein Profil",
    "nav.explore": "Ausflüge entdecken",
    "nav.destinations": "Destinationen",
    "nav.planner": "Planung",
    "nav.signIn": "Jetzt starten",
    "nav.language": "Sprache",
    "trips.title": "Meine Ausflüge",
    "trips.create": "Neue Planung",
    "trips.createTitle": "Neuen Ausflug erstellen",
    "trips.createDescription": "Fülle die Details für deinen neuen Ausflug aus. Mit * gekennzeichnete Felder sind erforderlich.",
    "trips.basicInfo": "Grundinformationen",
    "trips.dateTime": "Zeitplanung & Teilnehmer",
    "trips.options": "Zusätzliche Optionen",
    "trips.titleLabel": "Titel",
    "trips.destination": "Ziel",
    "trips.description": "Beschreibung",
    "trips.startDate": "Startdatum",
    "trips.endDate": "Enddatum",
    "trips.participants": "Teilnehmer",
    "trips.status": "Status",
    "trips.favorite": "Als Favorit markieren",
    "trips.public": "Öffentlich teilen",
    "trips.cancel": "Abbrechen",
    "trips.createBtn": "Erstellen",
    "trips.delete": "Löschen",
    "trips.open": "Öffnen",
    "trips.deleteConfirm": "Möchtest du diesen Ausflug wirklich löschen?",
    "trips.none": "Du hast noch keine Ausflüge erstellt",
    "trips.noneSubtitle": "Starte jetzt und plane dein erstes Abenteuer!",
    "trips.status.planned": "Geplant",
    "trips.status.ongoing": "Laufend",
    "trips.status.completed": "Abgeschlossen",
    "trips.status.cancelled": "Abgesagt",
    "destinations.title": "Meine Destinationen",
    "destinations.subtitle": "Speichere deine Lieblingsorte für zukünftige Ausflüge",
    "destinations.create": "Neue Destination",
    "destinations.createTitle": "Neue Destination",
    "destinations.edit": "Bearbeiten",
    "destinations.none": "Noch keine Destinationen",
    "destinations.noneSubtitle": "Füge deine ersten Lieblingsorte hinzu",
    "theme.dark": "Dunkler Modus",
    "theme.light": "Heller Modus",
    "home.featuresTitle": "Alles für deine Ausflüge",
    "home.featuresSubtitle": "Plane deine nächsten Abenteuer mit allen wichtigen Funktionen an einem Ort",
    "home.activities": "Aktivitäten",
    "home.freeActivities": "Kostenlos",
    "home.categories": "Kategorien",
    "home.planTrips": "Ausflüge planen",
    "home.planTripsDesc": "Plane deine Ausflugstage mit allen nützlichen Funktionen",
    "home.destinations": "Destinationen",
    "home.destinationsDesc": "Entdecke spannende Orte und speichere deine Lieblingsziele",
    "home.friends": "Freunde",
    "home.friendsDesc": "Verwalte deine Freunde und teile Ausflüge mit ihnen",
    "home.ctaTitle": "Bereit für dein nächstes Abenteuer?",
    "home.ctaSubtitle": "Starte jetzt und plane unvergessliche Ausflüge mit Familie und Freunden",
    "home.registerBtn": "Kostenlos registrieren",
    "auth.username": "Benutzername",
    "auth.password": "Passwort",
    "auth.email": "E-Mail (optional)",
    "auth.name": "Name",
    "auth.signIn": "Anmelden",
    "auth.signUp": "Registrieren",
    "auth.signInButton": "Anmelden",
    "auth.signUpButton": "Registrieren",
    "auth.noAccount": "Kein Konto?",
    "auth.haveAccount": "Haben Sie bereits ein Konto?",
    "auth.signInSuccess": "Anmeldung erfolgreich!",
    "auth.signUpSuccess": "Registrierung erfolgreich! Bitte melden Sie sich an.",
    "auth.signUpTitle": "Erstellen Sie ein Konto",
    "auth.signInTitle": "Melden Sie sich an",
    "auth.errorRequired": "Benutzername und Passwort sind erforderlich",
    "auth.nameRequired": "Name ist erforderlich",
    "auth.error": "Ein Fehler ist aufgetreten",
    "auth.privacyNotice": "Wird verarbeitet...",
    "common.loading": "Lädt...",
    "common.cancel": "Abbrechen",
    "common.save": "Speichern",
    "common.delete": "Löschen",
    "common.edit": "Bearbeiten",
    "common.back": "Zurück",
    "login.title": "AusflugFinder",
    "login.signInMode": "Melden Sie sich an",
    "login.registerMode": "Erstellen Sie ein Konto",
    "login.name": "Name",
    "login.namePlaceholder": "Ihr vollständiger Name",
    "login.username": "Benutzername",
    "login.usernamePlaceholder": "Benutzername",
    "login.password": "Passwort",
    "login.passwordPlaceholder": "Passwort",
    "login.email": "E-Mail (optional)",
    "login.emailPlaceholder": "E-Mail-Adresse",
    "login.processing": "Wird verarbeitet...",
    "login.signInBtn": "Anmelden",
    "login.registerBtn": "Registrieren",
    "login.noAccount": "Kein Konto?",
    "login.registerLink": "Registrieren",
    "login.haveAccount": "Haben Sie bereits ein Konto?",
    "login.signInLink": "Anmelden",
    "login.privacyNotice": "Mit der Registrierung akzeptieren Sie unsere Datenschutzrichtlinie",
    "explore.header": "AusflugFinder",
    "explore.back": "Zurück",
    "explore.myTrips": "Meine Ausflüge",
    "explore.title": "Ausflüge entdecken",
    "explore.subtitle": "Finde das perfekte Abenteuer und inspiriere dich für deine nächste Reise",
    "explore.activities": "Aktivitäten",
    "explore.freeActivities": "Kostenlos",
    "explore.categories": "Kategorien",
    "explore.tabTrips": "Ausflüge",
    "explore.tabDestinations": "Destinationen",
    "explore.search": "Suche nach Ausflügen...",
    "explore.allRegions": "Alle Regionen",
    "explore.allCategories": "Alle Kategorien",
    "explore.allCosts": "Alle Kosten",
    "explore.costFree": "Kostenlos",
    "explore.nearbyOnly": "Nur Ausflüge in der Nähe",
    "explore.resetFilters": "Filter zurücksetzen",
    "explore.sortBy": "Sortieren nach",
    "explore.sortDate": "Datum",
    "explore.sortName": "Name",
    "explore.sortCost": "Kosten",
    "explore.sortAsc": "Aufsteigend",
    "explore.sortDesc": "Absteigend",
    "explore.loading": "Lade Ausflüge...",
    "explore.resultsFound": "Ergebnisse gefunden",
    "explore.noResults": "Keine Ausflüge gefunden. Versuche andere Filter!",
    "explore.visited": "Besucht",
    "explore.destTitle": "Meine Destinationen",
    "explore.destSubtitle": "Speichere deine Lieblingsorte für zukünftige Ausflüge",
    "explore.destNew": "Neue Destination",
    "explore.destEdit": "Destination bearbeiten",
    "explore.destCreate": "Neue Destination",
    "explore.destNameLabel": "Name",
    "explore.destNamePlaceholder": "z.B. Schwarzwald",
    "explore.destLocationLabel": "Ort",
    "explore.destLocationPlaceholder": "z.B. Baden-Württemberg, Deutschland",
    "explore.destDescLabel": "Beschreibung",
    "explore.destDescPlaceholder": "Was macht diesen Ort besonders?",
    "explore.destImageLabel": "Bild-URL (optional)",
    "explore.destImagePlaceholder": "https://...",
    "explore.destCancel": "Abbrechen",
    "explore.destUpdate": "Aktualisieren",
    "explore.destCreateBtn": "Erstellen",
    "explore.destNone": "Keine Destinationen vorhanden. Erstelle deine erste Destination!",
    "explore.destFirstBtn": "Erste Destination erstellen",
    "explore.destDeleteConfirm": "Möchtest du diese Destination wirklich löschen?",
    "tripDetail.back": "Zurück",
    "tripDetail.notFound": "Ausflug nicht gefunden",
    "tripDetail.backToOverview": "Zurück zur Übersicht",
    "tripDetail.noImage": "Kein Bild vorhanden",
    "tripDetail.favorite": "Favorit",
    "tripDetail.share": "Teilen",
    "tripDetail.print": "Drucken",
    "tripDetail.edit": "Bearbeiten",
    "tripDetail.delete": "Löschen",
    "tripDetail.deleteConfirm": "Möchten Sie diesen Ausflug wirklich löschen? Dies kann nicht rückgängig gemacht werden.",
    "tripDetail.description": "Beschreibung",
    "tripDetail.niceToKnow": "Wissenswert",
    "tripDetail.info": "Informationen",
    "tripDetail.cost": "Kosten",
    "tripDetail.category": "Kategorie",
    "tripDetail.region": "Region",
    "tripDetail.destination": "Zielort",
    "tripDetail.contact": "Kontakt",
    "tripDetail.email": "E-Mail",
    "tripDetail.whatsapp": "WhatsApp",
    "tripDetail.shareTitle": "Ausflug teilen",
    "tripDetail.shareDesc": "Teile diesen Ausflug mit Freunden und Familie",
    "tripDetail.linkCopied": "Link kopiert!",
    "tripDetail.editTitle": "Ausflug bearbeiten",
    "tripDetail.editDesc": "Aktualisiere die Details dieses Ausflugs",
    "tripDetail.titleLabel": "Titel",
    "tripDetail.destinationLabel": "Zielort",
    "tripDetail.regionLabel": "Region",
    "tripDetail.categoryLabel": "Kategorie",
    "tripDetail.costLabel": "Kosten",
    "tripDetail.descriptionLabel": "Beschreibung",
    "tripDetail.imageLabel": "Titelbild hochladen",
    "tripDetail.imageHint": "Unterstützte Formate: JPG, PNG, WebP (max. ~5 MB empfohlen)",
    "tripDetail.imagePreview": "Vorschau:",
    "tripDetail.cancel": "Abbrechen",
    "tripDetail.save": "Speichern",
    "tripDetail.saving": "Speichern...",
    "plannerDetail.back": "Zurück",
    "plannerDetail.notFound": "Planung nicht gefunden",
    "plannerDetail.backToOverview": "Zurück zur Übersicht",
    "plannerDetail.draft": "Entwurf",
    "plannerDetail.published": "Veröffentlicht",
    "plannerDetail.exportICal": "iCal",
    "plannerDetail.exportPDF": "PDF",
    "plannerDetail.publish": "Veröffentlichen",
    "plannerDetail.backToDraft": "Zurück zu Entwurf",
    "plannerDetail.deletePlan": "Löschen",
    "plannerDetail.deleteConfirm": "Möchten Sie diese Planung wirklich löschen? Dies kann nicht rückgängig gemacht werden.",
    "plannerDetail.period": "Zeitraum",
    "plannerDetail.packingList": "Packliste",
    "plannerDetail.budget": "Budget",
    "plannerDetail.tasks": "Aufgaben",
    "plannerDetail.tabTimeline": "Timeline",
    "plannerDetail.tabRoute": "Route",
    "plannerDetail.tabWeather": "Wetter",
    "plannerDetail.tabPacking": "Packliste",
    "plannerDetail.tabBudget": "Budget",
    "plannerDetail.tabChecklist": "Checkliste",
    "plannerDetail.tripsTitle": "Ausflüge & Zeitplan",
    "plannerDetail.addTrip": "Ausflug hinzufügen",
    "plannerDetail.addTripTitle": "Ausflug zur Planung hinzufügen",
    "plannerDetail.addTripDesc": "Wähle einen bestehenden Ausflug oder erstelle einen benutzerdefinierten",
    "plannerDetail.selectTrip": "Ausflug wählen",
    "plannerDetail.createCustom": "Neu erstellen",
    "plannerDetail.tripLabel": "Ausflug",
    "plannerDetail.tripPlaceholder": "Ausflug wählen...",
    "plannerDetail.tripTitleLabel": "Ausflug-Titel",
    "plannerDetail.tripLocationLabel": "Ort/Zielort",
    "plannerDetail.startTimeLabel": "Startzeit",
    "plannerDetail.endTimeLabel": "Endzeit",
    "plannerDetail.dateForWeather": "Datum für Wettervorhersage",
    "plannerDetail.notesLabel": "Notizen",
    "plannerDetail.notesPlaceholder": "Optionale Notizen...",
    "plannerDetail.noTrips": "Noch keine Ausflüge hinzugefügt. Klicke auf \"Ausflug hinzufügen\" um zu starten.",
    "plannerDetail.packingTitle": "Packliste",
    "plannerDetail.addItem": "Artikel hinzufügen",
    "plannerDetail.editItem": "Artikel bearbeiten",
    "plannerDetail.itemLabel": "Artikel",
    "plannerDetail.itemPlaceholder": "z.B. Wanderschuhe",
    "plannerDetail.quantityLabel": "Anzahl",
    "plannerDetail.categoryLabel": "Kategorie",
    "plannerDetail.categoryPlaceholder": "Kategorie wählen...",
    "plannerDetail.noPacking": "Noch keine Artikel auf der Packliste",
    "plannerDetail.budgetTitle": "Budget-Planung",
    "plannerDetail.estimated": "Geschätzt",
    "plannerDetail.actual": "Tatsächlich",
    "plannerDetail.difference": "Differenz",
    "plannerDetail.addBudget": "Eintrag hinzufügen",
    "plannerDetail.budgetCategory": "Kategorie",
    "plannerDetail.budgetDesc": "Beschreibung",
    "plannerDetail.budgetDescPlaceholder": "z.B. Zugtickets nach Zürich",
    "plannerDetail.estimatedCost": "Geschätzte Kosten (CHF)",
    "plannerDetail.actualCost": "Tatsächliche Kosten (CHF)",
    "plannerDetail.noBudget": "Noch keine Budget-Einträge",
    "plannerDetail.checklistTitle": "Aufgaben & Checkliste",
    "plannerDetail.addTask": "Aufgabe hinzufügen",
    "plannerDetail.taskLabel": "Aufgabe",
    "plannerDetail.taskPlaceholder": "z.B. Tickets buchen",
    "plannerDetail.priorityLabel": "Priorität",
    "plannerDetail.priorityLow": "Niedrig",
    "plannerDetail.priorityMedium": "Mittel",
    "plannerDetail.priorityHigh": "Hoch",
    "plannerDetail.noChecklist": "Noch keine Aufgaben auf der Checkliste",
    "destinations.loginRequired": "Destinationen",
    "destinations.loginDesc": "Melden Sie sich an, um Ihre Lieblingsdestinationen zu speichern und zu verwalten",
    "destinations.loginBtn": "Jetzt anmelden",
    "destinations.pageTitle": "Meine Destinationen",
    "destinations.pageSubtitle": "Speichere deine Lieblingsorte für zukünftige Ausflüge",
    "destinations.newDestination": "Neue Destination",
    "destinations.editDestination": "Destination bearbeiten",
    "destinations.createDestination": "Neue Destination",
    "destinations.addFavorite": "Füge einen neuen Lieblingsort hinzu",
    "destinations.nameRequired": "Name *",
    "destinations.locationRequired": "Ort *",
    "destinations.description": "Beschreibung",
    "destinations.imageUrl": "Bild-URL (optional)",
    "destinations.cancel": "Abbrechen",
    "destinations.update": "Aktualisieren",
    "destinations.create": "Erstellen",
    "destinations.noDestinations": "Noch keine Destinationen",
    "destinations.noDestinationsDesc": "Füge deine ersten Lieblingsorte hinzu",
    "destinations.createFirst": "Erste Destination erstellen",
    "destinations.deleteConfirm": "Möchten Sie diese Destination wirklich löschen?",
    "profile.loginRequired": "Anmeldung erforderlich",
    "profile.loginDesc": "Bitte melden Sie sich an, um Ihr Profil zu sehen",
    "profile.loginBtn": "Jetzt anmelden",
    "profile.backHome": "Zurück zur Startseite",
    "profile.back": "Zurück",
    "profile.logout": "Abmelden",
    "profile.admin": "Administrator",
    "profile.user": "Benutzer",
    "profile.adminPortal": "Admin Portal",
    "profile.noEmail": "Keine E-Mail",
    "profile.memberSince": "Mitglied seit",
    "profile.loginMethod": "Login:",
    "profile.loginDefault": "Standard",
    "profile.statistics": "Meine Statistiken",
    "profile.trips": "Ausflüge",
    "profile.favorites": "Favoriten",
    "profile.completed": "Erledigt",
    "profile.destinationsCount": "Destinationen",
    "profile.recentActivity": "Letzte Aktivitäten",
    "profile.recentDesc": "Ihre neuesten Ausflüge und Pläne",
    "profile.noTrips": "Noch keine Ausflüge vorhanden. Erstellen Sie Ihren ersten Ausflug!",
    "profile.dayPlansTitle": "Meine Tagespläne",
    "profile.dayPlansCount": "Plan",
    "profile.dayPlansCountPlural": "Pläne",
    "profile.view": "Ansehen",
    "profile.logoutSuccess": "Erfolgreich abgemeldet",
    "planner.loginRequired": "Anmeldung erforderlich",
    "planner.loginDesc": "Bitte melden Sie sich an, um Tagespläne zu erstellen",
    "planner.loginBtn": "Jetzt anmelden",
    "planner.backHome": "Zurück zur Startseite",
    "planner.back": "Zurück",
    "planner.pageTitle": "Tagesplanung",
    "planner.newPlan": "Neue Planung",
    "planner.createTitle": "Neue Planung erstellen",
    "planner.singleDay": "Erstellen Sie einen Tagesausflug mit mehreren Aktivitäten",
    "planner.multiDay": "Erstellen Sie einen mehrtägigen Ausflug mit verschiedenen Stationen",
    "planner.planType": "Planungstyp",
    "planner.singleDayOption": "Tagesausflug",
    "planner.multiDayOption": "Mehrtägiger Ausflug",
    "planner.titleLabel": "Titel",
    "planner.titlePlaceholder": "z.B. Wochenendausflug Bern",
    "planner.descLabel": "Beschreibung",
    "planner.descPlaceholder": "Optionale Beschreibung...",
    "planner.dateLabel": "Datum",
    "planner.startDateLabel": "Startdatum",
    "planner.endDateLabel": "Enddatum",
    "planner.creating": "Erstelle...",
    "planner.createBtn": "Plan erstellen",
    "planner.myPlans": "Meine Pläne",
    "planner.planCount": "Plan",
    "planner.planCountPlural": "Pläne",
    "planner.noPlans": "Noch keine Pläne vorhanden. Erstellen Sie Ihren ersten Plan!",
    "planner.tripsInPlan": "Ausflüge im Plan",
    "planner.tripCount": "Ausflug",
    "planner.tripCountPlural": "Ausflüge",
    "planner.noTripsInPlan": "Noch keine Ausflüge im Plan. Fügen Sie Ausflüge hinzu!",
    "planner.availableTrips": "Verfügbare Ausflüge",
    "planner.clickToAdd": "Klicken Sie auf einen Ausflug, um ihn hinzuzufügen",
    "planner.inPlan": "Im Plan",
    "planner.noTripsAvailable": "Keine Ausflüge vorhanden. Erstellen Sie zuerst Ausflüge!",
    "planner.selectOrCreate": "Wählen Sie einen Plan aus oder erstellen Sie einen neuen",
    "friends.loginRequired": "Anmeldung erforderlich",
    "friends.loginDesc": "Du musst angemeldet sein, um deine Freunde zu verwalten.",
    "friends.back": "Zurück",
    "friends.pageTitle": "Meine Freunde",
    "friends.addFriend": "Freund hinzufügen",
    "friends.addFriendTitle": "Freund hinzufügen",
    "friends.addFriendDesc": "Geben Sie die E-Mail-Adresse eines Freundes ein",
    "friends.emailLabel": "E-Mail-Adresse",
    "friends.emailPlaceholder": "freund@example.com",
    "friends.cancel": "Abbrechen",
    "friends.adding": "Hinzufügen...",
    "friends.add": "Hinzufügen",
    "friends.friendsList": "Freundesliste",
    "friends.noFriends": "Keine Freunde hinzugefügt",
    "friends.selectFriend": "Wähle einen Freund aus, um Details zu sehen",
    "friends.sharedTrips": "Gemeinsame Ausflüge",
    "friends.sharedDestinations": "Gemeinsame Destinationen",
    "friends.noSharedTrips": "Noch keine gemeinsamen Ausflüge",
    "friends.noSharedDest": "Noch keine gemeinsamen Destinationen",
    "friends.deleteConfirm": "Möchtest du diesen Freund wirklich löschen?",
    "admin.accessDenied": "Zugriff verweigert",
    "admin.noPermission": "Sie haben keine Admin-Berechtigung",
    "admin.backHome": "Zurück zur Startseite",
    "admin.back": "Zurück",
    "admin.pageTitle": "Admin Portal",
    "admin.adminBadge": "Admin",
    "admin.dashboard": "Dashboard",
    "admin.totalTrips": "Gesamt Ausflüge",
    "admin.allTrips": "Alle registrierten Ausflüge",
    "admin.categoriesCount": "Kategorien",
    "admin.availableCategories": "Verfügbare Kategorien",
    "admin.freeActivities": "Kostenlos",
    "admin.freeCount": "Kostenlose Aktivitäten",
    "admin.userAccount": "Benutzerkonto",
    "admin.adminUser": "Admin-Benutzer",
    "admin.tripsManagement": "Ausflug-Verwaltung",
    "admin.favorite": "Favorit",
    "admin.public": "Öffentlich",
    "admin.view": "Ansehen",
    "admin.destination": "Zielort:",
    "admin.category": "Kategorie:",
    "admin.region": "Region:",
    "admin.cost": "Kosten:",
    "admin.costFree": "Kostenlos",
    "admin.noTrips": "Keine Ausflüge gefunden",
    "notfound.title": "404",
    "notfound.pageNotFound": "Seite nicht gefunden",
    "notfound.message": "Entschuldigung, die gesuchte Seite existiert nicht.",
    "notfound.messageLine2": "Sie wurde möglicherweise verschoben oder gelöscht.",
    "notfound.goHome": "Zur Startseite",
  },
  en: {
    "app.title": "Trip Manager",
    "app.tagline": "Discover, plan, and manage unforgettable family trips and adventures",
    "nav.myTrips": "My Trips",
    "nav.profile": "My Profile",
    "nav.explore": "Explore Trips",
    "nav.destinations": "Destinations",
    "nav.planner": "Planner",
    "nav.signIn": "Get Started",
    "nav.language": "Language",
    "trips.title": "My Trips",
    "trips.create": "New Trip",
    "trips.createTitle": "Create New Trip",
    "trips.createDescription": "Fill in the details for your new trip. Fields marked with * are required.",
    "trips.basicInfo": "Basic Information",
    "trips.dateTime": "Schedule & Participants",
    "trips.options": "Additional Options",
    "trips.titleLabel": "Title",
    "trips.destination": "Destination",
    "trips.description": "Description",
    "trips.startDate": "Start Date",
    "trips.endDate": "End Date",
    "trips.participants": "Participants",
    "trips.status": "Status",
    "trips.favorite": "Mark as Favorite",
    "trips.public": "Share Publicly",
    "trips.cancel": "Cancel",
    "trips.createBtn": "Create",
    "trips.delete": "Delete",
    "trips.open": "Open",
    "trips.deleteConfirm": "Do you really want to delete this trip?",
    "trips.none": "You haven't created any trips yet",
    "trips.noneSubtitle": "Start now and plan your first adventure!",
    "trips.status.planned": "Planned",
    "trips.status.ongoing": "Ongoing",
    "trips.status.completed": "Completed",
    "trips.status.cancelled": "Cancelled",
    "destinations.title": "My Destinations",
    "destinations.subtitle": "Save your favorite places for future trips",
    "destinations.create": "New Destination",
    "destinations.createTitle": "New Destination",
    "destinations.edit": "Edit",
    "destinations.none": "No destinations yet",
    "destinations.noneSubtitle": "Add your first favorite places",
    "theme.dark": "Dark Mode",
    "theme.light": "Light Mode",
    "home.featuresTitle": "Everything for Your Trips",
    "home.featuresSubtitle": "Plan your next adventures with all the important features in one place",
    "home.activities": "Activities",
    "home.freeActivities": "Free",
    "home.categories": "Categories",
    "home.planTrips": "Plan Trips",
    "home.planTripsDesc": "Plan your trip days with all useful features",
    "home.destinations": "Destinations",
    "home.destinationsDesc": "Discover exciting places and save your favorite destinations",
    "home.friends": "Friends",
    "home.friendsDesc": "Manage your friends and share trips with them",
    "home.ctaTitle": "Ready for your next adventure?",
    "home.ctaSubtitle": "Start now and plan unforgettable trips with family and friends",
    "home.registerBtn": "Register for Free",
    "auth.username": "Username",
    "auth.password": "Password",
    "auth.email": "Email (optional)",
    "auth.name": "Name",
    "auth.signIn": "Sign In",
    "auth.signUp": "Sign Up",
    "auth.signInButton": "Sign In",
    "auth.signUpButton": "Register",
    "auth.noAccount": "No account?",
    "auth.haveAccount": "Already have an account?",
    "auth.signInSuccess": "Sign in successful!",
    "auth.signUpSuccess": "Registration successful! Please sign in.",
    "auth.signUpTitle": "Create an Account",
    "auth.signInTitle": "Sign In",
    "auth.errorRequired": "Username and password are required",
    "auth.nameRequired": "Name is required",
    "auth.error": "An error occurred",
    "auth.privacyNotice": "Processing...",
    "common.loading": "Loading...",
    "common.cancel": "Cancel",
    "common.save": "Save",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.back": "Back",
    "login.title": "Trip Manager",
    "login.signInMode": "Sign In",
    "login.registerMode": "Create an Account",
    "login.name": "Name",
    "login.namePlaceholder": "Your full name",
    "login.username": "Username",
    "login.usernamePlaceholder": "Username",
    "login.password": "Password",
    "login.passwordPlaceholder": "Password",
    "login.email": "Email (optional)",
    "login.emailPlaceholder": "Email address",
    "login.processing": "Processing...",
    "login.signInBtn": "Sign In",
    "login.registerBtn": "Register",
    "login.noAccount": "No account?",
    "login.registerLink": "Register",
    "login.haveAccount": "Already have an account?",
    "login.signInLink": "Sign In",
    "login.privacyNotice": "By registering you accept our privacy policy",
    "explore.header": "Trip Manager",
    "explore.back": "Back",
    "explore.myTrips": "My Trips",
    "explore.title": "Discover Trips",
    "explore.subtitle": "Find the perfect adventure and get inspired for your next trip",
    "explore.activities": "Activities",
    "explore.freeActivities": "Free",
    "explore.categories": "Categories",
    "explore.tabTrips": "Trips",
    "explore.tabDestinations": "Destinations",
    "explore.search": "Search for trips...",
    "explore.allRegions": "All Regions",
    "explore.allCategories": "All Categories",
    "explore.allCosts": "All Costs",
    "explore.costFree": "Free",
    "explore.nearbyOnly": "Only nearby trips",
    "explore.resetFilters": "Reset filters",
    "explore.sortBy": "Sort by",
    "explore.sortDate": "Date",
    "explore.sortName": "Name",
    "explore.sortCost": "Cost",
    "explore.sortAsc": "Ascending",
    "explore.sortDesc": "Descending",
    "explore.loading": "Loading trips...",
    "explore.resultsFound": "results found",
    "explore.noResults": "No trips found. Try different filters!",
    "explore.visited": "Visited",
    "explore.destTitle": "My Destinations",
    "explore.destSubtitle": "Save your favorite places for future trips",
    "explore.destNew": "New Destination",
    "explore.destEdit": "Edit Destination",
    "explore.destCreate": "New Destination",
    "explore.destNameLabel": "Name",
    "explore.destNamePlaceholder": "e.g. Black Forest",
    "explore.destLocationLabel": "Location",
    "explore.destLocationPlaceholder": "e.g. Baden-Württemberg, Germany",
    "explore.destDescLabel": "Description",
    "explore.destDescPlaceholder": "What makes this place special?",
    "explore.destImageLabel": "Image URL (optional)",
    "explore.destImagePlaceholder": "https://...",
    "explore.destCancel": "Cancel",
    "explore.destUpdate": "Update",
    "explore.destCreateBtn": "Create",
    "explore.destNone": "No destinations yet. Create your first destination!",
    "explore.destFirstBtn": "Create first destination",
    "explore.destDeleteConfirm": "Do you really want to delete this destination?",
    "tripDetail.back": "Back",
    "tripDetail.notFound": "Trip not found",
    "tripDetail.backToOverview": "Back to overview",
    "tripDetail.noImage": "No image available",
    "tripDetail.favorite": "Favorite",
    "tripDetail.share": "Share",
    "tripDetail.print": "Print",
    "tripDetail.edit": "Edit",
    "tripDetail.delete": "Delete",
    "tripDetail.deleteConfirm": "Do you really want to delete this trip? This cannot be undone.",
    "tripDetail.description": "Description",
    "tripDetail.niceToKnow": "Good to Know",
    "tripDetail.info": "Information",
    "tripDetail.cost": "Cost",
    "tripDetail.category": "Category",
    "tripDetail.region": "Region",
    "tripDetail.destination": "Destination",
    "tripDetail.contact": "Contact",
    "tripDetail.email": "Email",
    "tripDetail.whatsapp": "WhatsApp",
    "tripDetail.shareTitle": "Share Trip",
    "tripDetail.shareDesc": "Share this trip with friends and family",
    "tripDetail.linkCopied": "Link copied!",
    "tripDetail.editTitle": "Edit Trip",
    "tripDetail.editDesc": "Update the details of this trip",
    "tripDetail.titleLabel": "Title",
    "tripDetail.destinationLabel": "Destination",
    "tripDetail.regionLabel": "Region",
    "tripDetail.categoryLabel": "Category",
    "tripDetail.costLabel": "Cost",
    "tripDetail.descriptionLabel": "Description",
    "tripDetail.imageLabel": "Upload cover image",
    "tripDetail.imageHint": "Supported formats: JPG, PNG, WebP (max. ~5 MB recommended)",
    "tripDetail.imagePreview": "Preview:",
    "tripDetail.cancel": "Cancel",
    "tripDetail.save": "Save",
    "tripDetail.saving": "Saving...",
    "plannerDetail.back": "Back",
    "plannerDetail.notFound": "Plan not found",
    "plannerDetail.backToOverview": "Back to overview",
    "plannerDetail.draft": "Draft",
    "plannerDetail.published": "Published",
    "plannerDetail.exportICal": "iCal",
    "plannerDetail.exportPDF": "PDF",
    "plannerDetail.publish": "Publish",
    "plannerDetail.backToDraft": "Back to Draft",
    "plannerDetail.deletePlan": "Delete",
    "plannerDetail.deleteConfirm": "Do you really want to delete this plan? This cannot be undone.",
    "plannerDetail.period": "Period",
    "plannerDetail.packingList": "Packing List",
    "plannerDetail.budget": "Budget",
    "plannerDetail.tasks": "Tasks",
    "plannerDetail.tabTimeline": "Timeline",
    "plannerDetail.tabRoute": "Route",
    "plannerDetail.tabWeather": "Weather",
    "plannerDetail.tabPacking": "Packing",
    "plannerDetail.tabBudget": "Budget",
    "plannerDetail.tabChecklist": "Checklist",
    "plannerDetail.tripsTitle": "Trips & Schedule",
    "plannerDetail.addTrip": "Add Trip",
    "plannerDetail.addTripTitle": "Add Trip to Plan",
    "plannerDetail.addTripDesc": "Choose an existing trip or create a custom one",
    "plannerDetail.selectTrip": "Select Trip",
    "plannerDetail.createCustom": "Create New",
    "plannerDetail.tripLabel": "Trip",
    "plannerDetail.tripPlaceholder": "Choose trip...",
    "plannerDetail.tripTitleLabel": "Trip Title",
    "plannerDetail.tripLocationLabel": "Location/Destination",
    "plannerDetail.startTimeLabel": "Start Time",
    "plannerDetail.endTimeLabel": "End Time",
    "plannerDetail.dateForWeather": "Date for Weather Forecast",
    "plannerDetail.notesLabel": "Notes",
    "plannerDetail.notesPlaceholder": "Optional notes...",
    "plannerDetail.noTrips": "No trips added yet. Click \"Add Trip\" to start.",
    "plannerDetail.packingTitle": "Packing List",
    "plannerDetail.addItem": "Add Item",
    "plannerDetail.editItem": "Edit Item",
    "plannerDetail.itemLabel": "Item",
    "plannerDetail.itemPlaceholder": "e.g. Hiking boots",
    "plannerDetail.quantityLabel": "Quantity",
    "plannerDetail.categoryLabel": "Category",
    "plannerDetail.categoryPlaceholder": "Choose category...",
    "plannerDetail.noPacking": "No items on packing list yet",
    "plannerDetail.budgetTitle": "Budget Planning",
    "plannerDetail.estimated": "Estimated",
    "plannerDetail.actual": "Actual",
    "plannerDetail.difference": "Difference",
    "plannerDetail.addBudget": "Add Entry",
    "plannerDetail.budgetCategory": "Category",
    "plannerDetail.budgetDesc": "Description",
    "plannerDetail.budgetDescPlaceholder": "e.g. Train tickets to Zurich",
    "plannerDetail.estimatedCost": "Estimated Cost (CHF)",
    "plannerDetail.actualCost": "Actual Cost (CHF)",
    "plannerDetail.noBudget": "No budget entries yet",
    "plannerDetail.checklistTitle": "Tasks & Checklist",
    "plannerDetail.addTask": "Add Task",
    "plannerDetail.taskLabel": "Task",
    "plannerDetail.taskPlaceholder": "e.g. Book tickets",
    "plannerDetail.priorityLabel": "Priority",
    "plannerDetail.priorityLow": "Low",
    "plannerDetail.priorityMedium": "Medium",
    "plannerDetail.priorityHigh": "High",
    "plannerDetail.noChecklist": "No tasks on checklist yet",
    "destinations.loginRequired": "Destinations",
    "destinations.loginDesc": "Sign in to save and manage your favorite destinations",
    "destinations.loginBtn": "Sign in now",
    "destinations.pageTitle": "My Destinations",
    "destinations.pageSubtitle": "Save your favorite places for future trips",
    "destinations.newDestination": "New Destination",
    "destinations.editDestination": "Edit Destination",
    "destinations.createDestination": "New Destination",
    "destinations.addFavorite": "Add a new favorite place",
    "destinations.nameRequired": "Name *",
    "destinations.locationRequired": "Location *",
    "destinations.description": "Description",
    "destinations.imageUrl": "Image URL (optional)",
    "destinations.cancel": "Cancel",
    "destinations.update": "Update",
    "destinations.create": "Create",
    "destinations.noDestinations": "No destinations yet",
    "destinations.noDestinationsDesc": "Add your first favorite places",
    "destinations.createFirst": "Create first destination",
    "destinations.deleteConfirm": "Do you really want to delete this destination?",
    "profile.loginRequired": "Sign in required",
    "profile.loginDesc": "Please sign in to view your profile",
    "profile.loginBtn": "Sign in now",
    "profile.backHome": "Back to homepage",
    "profile.back": "Back",
    "profile.logout": "Sign Out",
    "profile.admin": "Administrator",
    "profile.user": "User",
    "profile.adminPortal": "Admin Portal",
    "profile.noEmail": "No email",
    "profile.memberSince": "Member since",
    "profile.loginMethod": "Login:",
    "profile.loginDefault": "Standard",
    "profile.statistics": "My Statistics",
    "profile.trips": "Trips",
    "profile.favorites": "Favorites",
    "profile.completed": "Completed",
    "profile.destinationsCount": "Destinations",
    "profile.recentActivity": "Recent Activity",
    "profile.recentDesc": "Your latest trips and plans",
    "profile.noTrips": "No trips yet. Create your first trip!",
    "profile.dayPlansTitle": "My Day Plans",
    "profile.dayPlansCount": "Plan",
    "profile.dayPlansCountPlural": "Plans",
    "profile.view": "View",
    "profile.logoutSuccess": "Successfully signed out",
    "planner.loginRequired": "Sign in required",
    "planner.loginDesc": "Please sign in to create day plans",
    "planner.loginBtn": "Sign in now",
    "planner.backHome": "Back to homepage",
    "planner.back": "Back",
    "planner.pageTitle": "Day Planning",
    "planner.newPlan": "New Plan",
    "planner.createTitle": "Create New Plan",
    "planner.singleDay": "Create a day trip with multiple activities",
    "planner.multiDay": "Create a multi-day trip with different stops",
    "planner.planType": "Plan Type",
    "planner.singleDayOption": "Day Trip",
    "planner.multiDayOption": "Multi-day Trip",
    "planner.titleLabel": "Title",
    "planner.titlePlaceholder": "e.g. Weekend Trip Bern",
    "planner.descLabel": "Description",
    "planner.descPlaceholder": "Optional description...",
    "planner.dateLabel": "Date",
    "planner.startDateLabel": "Start Date",
    "planner.endDateLabel": "End Date",
    "planner.creating": "Creating...",
    "planner.createBtn": "Create Plan",
    "planner.myPlans": "My Plans",
    "planner.planCount": "Plan",
    "planner.planCountPlural": "Plans",
    "planner.noPlans": "No plans yet. Create your first plan!",
    "planner.tripsInPlan": "Trips in Plan",
    "planner.tripCount": "Trip",
    "planner.tripCountPlural": "Trips",
    "planner.noTripsInPlan": "No trips in plan yet. Add trips!",
    "planner.availableTrips": "Available Trips",
    "planner.clickToAdd": "Click on a trip to add it",
    "planner.inPlan": "In Plan",
    "planner.noTripsAvailable": "No trips available. Create trips first!",
    "planner.selectOrCreate": "Select a plan or create a new one",
    "friends.loginRequired": "Sign in required",
    "friends.loginDesc": "You must be signed in to manage your friends.",
    "friends.back": "Back",
    "friends.pageTitle": "My Friends",
    "friends.addFriend": "Add Friend",
    "friends.addFriendTitle": "Add Friend",
    "friends.addFriendDesc": "Enter a friend's email address",
    "friends.emailLabel": "Email Address",
    "friends.emailPlaceholder": "friend@example.com",
    "friends.cancel": "Cancel",
    "friends.adding": "Adding...",
    "friends.add": "Add",
    "friends.friendsList": "Friends List",
    "friends.noFriends": "No friends added",
    "friends.selectFriend": "Select a friend to see details",
    "friends.sharedTrips": "Shared Trips",
    "friends.sharedDestinations": "Shared Destinations",
    "friends.noSharedTrips": "No shared trips yet",
    "friends.noSharedDest": "No shared destinations yet",
    "friends.deleteConfirm": "Do you really want to delete this friend?",
    "admin.accessDenied": "Access Denied",
    "admin.noPermission": "You don't have admin permissions",
    "admin.backHome": "Back to homepage",
    "admin.back": "Back",
    "admin.pageTitle": "Admin Portal",
    "admin.adminBadge": "Admin",
    "admin.dashboard": "Dashboard",
    "admin.totalTrips": "Total Trips",
    "admin.allTrips": "All registered trips",
    "admin.categoriesCount": "Categories",
    "admin.availableCategories": "Available categories",
    "admin.freeActivities": "Free",
    "admin.freeCount": "Free activities",
    "admin.userAccount": "User Account",
    "admin.adminUser": "Admin User",
    "admin.tripsManagement": "Trip Management",
    "admin.favorite": "Favorite",
    "admin.public": "Public",
    "admin.view": "View",
    "admin.destination": "Destination:",
    "admin.category": "Category:",
    "admin.region": "Region:",
    "admin.cost": "Cost:",
    "admin.costFree": "Free",
    "admin.noTrips": "No trips found",
    "notfound.title": "404",
    "notfound.pageNotFound": "Page Not Found",
    "notfound.message": "Sorry, the page you are looking for doesn't exist.",
    "notfound.messageLine2": "It may have been moved or deleted.",
    "notfound.goHome": "Go Home",
  },
  fr: {
    "app.title": "Gestionnaire de Voyages",
    "app.tagline": "Découvrez, planifiez et gérez vos voyages en famille inoubliables",
    "nav.myTrips": "Mes Voyages",
    "nav.profile": "Mon Profil",
    "nav.explore": "Explorer les Voyages",
    "nav.destinations": "Destinations",
    "nav.planner": "Planificateur",
    "nav.signIn": "Commencer",
    "nav.language": "Langue",
    "trips.title": "Mes Voyages",
    "trips.create": "Nouveau Voyage",
    "trips.createTitle": "Créer un Nouveau Voyage",
    "trips.createDescription": "Remplissez les détails de votre nouveau voyage. Les champs marqués avec * sont obligatoires.",
    "trips.basicInfo": "Informations de Base",
    "trips.dateTime": "Planification & Participants",
    "trips.options": "Options Supplémentaires",
    "trips.titleLabel": "Titre",
    "trips.destination": "Destination",
    "trips.description": "Description",
    "trips.startDate": "Date de Début",
    "trips.endDate": "Date de Fin",
    "trips.participants": "Participants",
    "trips.status": "Statut",
    "trips.favorite": "Marquer comme Favori",
    "trips.public": "Partager Publiquement",
    "trips.cancel": "Annuler",
    "trips.createBtn": "Créer",
    "trips.delete": "Supprimer",
    "trips.open": "Ouvrir",
    "trips.deleteConfirm": "Voulez-vous vraiment supprimer ce voyage?",
    "trips.none": "Vous n'avez pas encore créé de voyages",
    "trips.noneSubtitle": "Commencez maintenant et planifiez votre première aventure!",
    "trips.status.planned": "Planifié",
    "trips.status.ongoing": "En cours",
    "trips.status.completed": "Terminé",
    "trips.status.cancelled": "Annulé",
    "destinations.title": "Mes Destinations",
    "destinations.subtitle": "Enregistrez vos lieux préférés pour les futurs voyages",
    "destinations.create": "Nouvelle Destination",
    "destinations.createTitle": "Nouvelle Destination",
    "destinations.edit": "Modifier",
    "destinations.none": "Pas de destinations encore",
    "destinations.noneSubtitle": "Ajoutez vos premiers lieux préférés",
    "theme.dark": "Mode Sombre",
    "theme.light": "Mode Clair",
    "home.featuresTitle": "Tout pour vos voyages",
    "home.featuresSubtitle": "Planifiez vos prochaines aventures avec toutes les fonctionnalités importantes en un seul endroit",
    "home.activities": "Activités",
    "home.freeActivities": "Gratuit",
    "home.categories": "Catégories",
    "home.planTrips": "Planifier les Voyages",
    "home.planTripsDesc": "Planifiez vos journées de voyage avec toutes les fonctionnalités utiles",
    "home.destinations": "Destinations",
    "home.destinationsDesc": "Découvrez des endroits passionnants et enregistrez vos destinations préférées",
    "home.friends": "Amis",
    "home.friendsDesc": "Gérez vos amis et partagez des voyages avec eux",
    "home.ctaTitle": "Prêt pour votre prochaine aventure?",
    "home.ctaSubtitle": "Commencez maintenant et planifiez des voyages inoubliables en famille et entre amis",
    "home.registerBtn": "S'inscrire Gratuitement",
    "auth.username": "Nom d'utilisateur",
    "auth.password": "Mot de passe",
    "auth.email": "E-mail (facultatif)",
    "auth.name": "Nom",
    "auth.signIn": "Se connecter",
    "auth.signUp": "S'inscrire",
    "auth.signInButton": "Se connecter",
    "auth.signUpButton": "S'inscrire",
    "auth.noAccount": "Pas de compte?",
    "auth.haveAccount": "Vous avez déjà un compte?",
    "auth.signInSuccess": "Connexion réussie!",
    "auth.signUpSuccess": "Inscription réussie! Veuillez vous connecter.",
    "auth.signUpTitle": "Créer un compte",
    "auth.signInTitle": "Se connecter",
    "auth.errorRequired": "Le nom d'utilisateur et le mot de passe sont obligatoires",
    "auth.nameRequired": "Le nom est obligatoire",
    "auth.error": "Une erreur s'est produite",
    "auth.privacyNotice": "En cours de traitement...",
    "common.loading": "Chargement...",
    "common.cancel": "Annuler",
    "common.save": "Enregistrer",
    "common.delete": "Supprimer",
    "common.edit": "Modifier",
    "common.back": "Retour",
  },
  it: {
    "app.title": "Gestore di Viaggi",
    "app.tagline": "Scopri, pianifica e gestisci indimenticabili viaggi in famiglia",
    "nav.myTrips": "I Miei Viaggi",
    "nav.profile": "Il Mio Profilo",
    "nav.explore": "Esplora Viaggi",
    "nav.destinations": "Destinazioni",
    "nav.planner": "Pianificatore",
    "nav.signIn": "Inizia Ora",
    "nav.language": "Lingua",
    "trips.title": "I Miei Viaggi",
    "trips.create": "Nuovo Viaggio",
    "trips.createTitle": "Crea Nuovo Viaggio",
    "trips.createDescription": "Riempi i dettagli per il tuo nuovo viaggio. I campi contrassegnati con * sono obbligatori.",
    "trips.basicInfo": "Informazioni di Base",
    "trips.dateTime": "Pianificazione & Partecipanti",
    "trips.options": "Opzioni Aggiuntive",
    "trips.titleLabel": "Titolo",
    "trips.destination": "Destinazione",
    "trips.description": "Descrizione",
    "trips.startDate": "Data di Inizio",
    "trips.endDate": "Data di Fine",
    "trips.participants": "Partecipanti",
    "trips.status": "Stato",
    "trips.favorite": "Contrassegna come Preferito",
    "trips.public": "Condividi Pubblicamente",
    "trips.cancel": "Annulla",
    "trips.createBtn": "Crea",
    "trips.delete": "Elimina",
    "trips.open": "Apri",
    "trips.deleteConfirm": "Vuoi veramente eliminare questo viaggio?",
    "trips.none": "Non hai ancora creato alcun viaggio",
    "trips.noneSubtitle": "Inizia ora e pianifica la tua prima avventura!",
    "trips.status.planned": "Pianificato",
    "trips.status.ongoing": "In Corso",
    "trips.status.completed": "Completato",
    "trips.status.cancelled": "Annullato",
    "destinations.title": "Le Mie Destinazioni",
    "destinations.subtitle": "Salva i tuoi luoghi preferiti per i futuri viaggi",
    "destinations.create": "Nuova Destinazione",
    "destinations.createTitle": "Nuova Destinazione",
    "destinations.edit": "Modifica",
    "destinations.none": "Nessuna destinazione ancora",
    "destinations.noneSubtitle": "Aggiungi i tuoi primi luoghi preferiti",
    "theme.dark": "Modalità Scura",
    "theme.light": "Modalità Chiara",
    "home.featuresTitle": "Tutto per i Tuoi Viaggi",
    "home.featuresSubtitle": "Pianifica le tue prossime avventure con tutte le funzionalità importanti in un unico luogo",
    "home.activities": "Attività",
    "home.freeActivities": "Gratis",
    "home.categories": "Categorie",
    "home.planTrips": "Pianifica Viaggi",
    "home.planTripsDesc": "Pianifica le tue giornate di viaggio con tutte le funzionalità utili",
    "home.destinations": "Destinazioni",
    "home.destinationsDesc": "Scopri posti affascinanti e salva le tue destinazioni preferite",
    "home.friends": "Amici",
    "home.friendsDesc": "Gestisci i tuoi amici e condividi i viaggi con loro",
    "home.ctaTitle": "Pronto per la tua prossima avventura?",
    "home.ctaSubtitle": "Inizia ora e pianifica indimenticabili viaggi in famiglia e con gli amici",
    "home.registerBtn": "Registrati Gratuitamente",
    "auth.username": "Nome utente",
    "auth.password": "Password",
    "auth.email": "Email (facoltativo)",
    "auth.name": "Nome",
    "auth.signIn": "Accedi",
    "auth.signUp": "Registrati",
    "auth.signInButton": "Accedi",
    "auth.signUpButton": "Registrati",
    "auth.noAccount": "Non hai un account?",
    "auth.haveAccount": "Hai già un account?",
    "auth.signInSuccess": "Accesso riuscito!",
    "auth.signUpSuccess": "Registrazione riuscita! Accedi per continuare.",
    "auth.signUpTitle": "Crea un Account",
    "auth.signInTitle": "Accedi",
    "auth.errorRequired": "Nome utente e password sono obbligatori",
    "auth.nameRequired": "Il nome è obbligatorio",
    "auth.error": "Si è verificato un errore",
    "auth.privacyNotice": "Elaborazione...",
    "common.loading": "Caricamento...",
    "common.cancel": "Annulla",
    "common.save": "Salva",
    "common.delete": "Elimina",
    "common.edit": "Modifica",
    "common.back": "Indietro",
  },
};

interface I18nContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const I18nContext = createContext<I18nContextType | undefined>(undefined);

interface I18nProviderProps {
  children: React.ReactNode;
  defaultLanguage?: Language;
}

export function I18nProvider({
  children,
  defaultLanguage = "de",
}: I18nProviderProps) {
  const [language, setLanguage] = useState<Language>(() => {
    if (typeof window === "undefined") return defaultLanguage;
    const stored = localStorage.getItem("language");
    if (stored && ["de", "fr", "it", "en"].includes(stored)) {
      return stored as Language;
    }
    return defaultLanguage;
  });

  useEffect(() => {
    localStorage.setItem("language", language);
    document.documentElement.lang = language;
    document.documentElement.setAttribute("lang", language);
  }, [language]);

  const t = useCallback((key: string): string => {
    return translations[language][key as keyof typeof translations[Language]] || key;
  }, [language]);

  const value = useMemo(() => ({ language, setLanguage, t }), [language, t]);

  return (
    <I18nContext.Provider value={value}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error("useI18n must be used within I18nProvider");
  }
  return context;
}
